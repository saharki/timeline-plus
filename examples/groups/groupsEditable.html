<!DOCTYPE HTML>
<html>
<head>
  <title>Timeline | Editable Groups</title>

  <style>
    body, html {
      font-family: arial, sans-serif;
      font-size: 11pt;
    }

    #visualization {
      box-sizing: border-box;
      width: 100%;
      height: 300px;
    }
    
    .timeline-item.openwheel  { background-color: #B0E2FF; }
    .timeline-item.rally      { background-color: #EAEAEA; }
    .timeline-item.motorcycle { background-color: #FA8072; }
    .timeline-item.touringcar { background-color: #B4EEB4; }
    .timeline-item.endurance  { background-color: #FFFFCC; }
  </style>

  <script src="../../dist/timeline.js"></script>
  <link href="../../dist/timeline.min.css" rel="stylesheet" type="text/css" />
<!--    -->
</head>
<body>
<p>
  This example demonstrates editable groups (reordering and hiding).
  <button onclick="showAllGroups()">Restore Hidden</button>
</p>
<div id="visualization"></div>

<script>
  // http://motocal.com/
  var groups = new timeline.DataSet([
	{"content": "WRC", "id": "WRC", "value": 2, className:'rally'},
	{"content": "MotoGP", "id": "MotoGP", "value": 3, className:'motorcycle'},
	{"content": "V8SC", "id": "V8SC", "value": 4, className:'touringcars'},
	{"content": "WTCC", "id": "WTCC", "value": 5, className:'touringcars'},
	{"content": "F1", "id": "F1", "value": 6, className:'openwheel'},
	{"content": "SBK", "id": "SBK", "value": 7, className:'motorcycle'},
	{"content": "IndyCar", "id": "IndyCar", "value": 8, className:'openwheel'},
	{"content": "MotoAmerica", "id": "MotoAmerica", "value": 9, className:'motorcycle'},
	{"content": "SGP", "id": "SGP", "value": 10, className:'rally'},
	{"content": "EWC", "id": "EWC", "value": 11, className:'endurance'},
	{"content": "BSB", "id": "BSB", "value": 12, className:'motorcycle'},
	{"content": "DTM", "id": "DTM", "value": 13, className:'touringcars'},
	{"content": "BTCC", "id": "BTCC", "value": 14, className:'touringcars'},
	{"content": "WorldRX", "id": "WorldRX", "value": 15, className:'rally'},
	{"content": "WSR", "id": "WSR", "value": 16, className:'openwheel'},
	{"content": "Roads", "id": "Roads", "value": 17, className:'motorcycle'},
	{"content": "WEC", "id": "WEC", "value": 18, className:'endurance'},
	{"content": "GP2", "id": "GP2", "value": 19, className:'openwheel'}
  ]);

  // function to make all groups visible again
  function showAllGroups(){
    groups.forEach(function(group){
      groups.update({id: group.id, visible: true});
    })
  };

  // create a dataset with items
  // note that months are zero-based in the JavaScript Date object, so month 3 is April
  var items = new timeline.DataSet([
	{start: new Date(2015, 7, 10, 0), end: new Date(2015, 7, 10, 2), group:"WRC", className:"openwheel", content:"1",id:"1531@motocal.net"},
	{start: new Date(2015, 7, 10, 1), end: new Date(2015, 7, 10, 3), group:"WRC", className:"openwheel", content:"2",id:"2531@motocal.net"},
	{start: new Date(2015, 7, 10, 2), end: new Date(2015, 7, 10, 4), group:"WRC", className:"openwheel", content:"3",id:"3531@motocal.net"},
	{start: new Date(2015, 7, 10, 3), end: new Date(2015, 7, 10, 5), group:"WRC", className:"openwheel", content:"4",id:"4531@motocal.net"},
	{start: new Date(2015, 7, 10, 4), end: new Date(2015, 7, 10, 6), group:"WRC", className:"openwheel", content:"5",id:"5531@motocal.net"},
	{start: new Date(2015, 7, 10, 5), end: new Date(2015, 7, 10, 7), group:"WRC", className:"openwheel", content:"6",id:"6531@motocal.net"}	  

  ])

 
  // create visualization
  var container = document.getElementById('visualization');
  var options = {
    // option groupOrder can be a property name or a sort function
    // the sort function must compare two groups and return a value
    //     > 0 when a > b
    //     < 0 when a < b
    //       0 when a == b
    groupOrder: function (a, b) {
      return a.value - b.value;
    },
    groupOrderSwap: function (a, b, groups) {
    	var v = a.value;
    	a.value = b.value;
    	b.value = v;
    },
    groupTemplate: function(group){
      var container = document.createElement('div');
      var label = document.createElement('span');
      label.innerHTML = group.content + ' ';
      container.insertAdjacentElement('afterBegin',label);
      var hide = document.createElement('button');
      hide.innerHTML = 'hide';
      hide.style.fontSize = 'small';
      hide.addEventListener('click',function(){
        groups.update({id: group.id, visible: false});
      });
      container.insertAdjacentElement('beforeEnd',hide);
      return container;
    },
    orientation: 'both',
    editable: true,
    groupEditable: true,
    start: new Date(2015, 6, 1),
    end: new Date(2015, 10, 1)
  };

  var timeline = new timeline.Timeline(container);
  timeline.setOptions(options);
  timeline.setGroups(groups);
  timeline.setItems(items);

</script>
</body>
</html>